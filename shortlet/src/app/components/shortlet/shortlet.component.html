<div class="container">
  <h2 style="padding-top: 1rem">{{ shortletData.name }}</h2>
  <div style="display: flex; justify-content: space-between">
    <div style="display: flex; gap: 0.5rem">
      <p>★ {{ shortletData.rating }}</p>
      <p>· {{ shortletData.users.name }}</p>
      <p>· {{ shortletData.address }}</p>
    </div>
  </div>

  <div class="parent">
    <div class="div1">
      <img src="{{ shortletPictures[0].url }}" alt="apartment-pic" />
    </div>
    <div class="div2">
      <img src="{{ shortletPictures[1].url }}" alt="apartment-pic" />
    </div>
    <div class="div3">
      <img src="{{ shortletPictures[2].url }}" alt="apartment-pic" />
    </div>
    <div class="div4">
      <img src="{{ shortletPictures[3].url }}" alt="apartment-pic" />
    </div>
    <div class="div5">
      <img src="{{ shortletPictures[4].url }}" alt="apartment-pic" />
    </div>
  </div>
  <!-- flex -->

  <div class="row shortlet_content">
    <div class="col-md-8 shortlet_dets">
      <div>
        <div>
          <h2>Entire home hosted by {{ shortletData.users.name }}</h2>
          <div style="display: flex; gap: 0.5rem">
            <p>{{ shortletData.maxNoOfGuests }} guests</p>
            <p>{{ shortletData.noOfBedrooms }} bedrooms</p>
            <p>{{ shortletData.noOfBeds }} beds</p>
            <p>{{ shortletData.noOfBathrooms }} baths</p>
          </div>
          <hr />

          <div style="display: flex; gap: 0.5rem">
            <img
              style="width: 24px; width: 24px"
              src="../../../assets/svg/clock.svg"
              alt="clock-img"
            />
            <div>
              <h5 style="margin: 0">Free cancellation for 48 hours.</h5>
            </div>
          </div>
        </div>
        <hr />

        <p>
          {{ shortletData.description }}
        </p>

        <hr />
        <h4>What this place offers</h4>

        <div class="row">
          <div class="col-md-6" *ngFor="let item of amenities">{{ item }}</div>
        </div>
        <div></div>
        <hr />
        <div>
          <h5>{{ numberOfNights }} nights in {{ shortletData.address }}</h5>

          <p>{{ checkinDate | date }} - {{ minDateForCheckOut | date }}</p>

          <mat-form-field
            style="margin-right: 15px"
            appearance="fill"
            (click)="picker.open()"
            class="removeOnScreen425"
          >
            <mat-label>Check in date</mat-label>
            <input
              matInput
              [min]="minDate"
              [(ngModel)]="checkinDate"
              [matDatepicker]="picker"
              [matDatepickerFilter]="myHolidayFilter"
              (dateChange)="trialM($event)"
            />
            <mat-datepicker-toggle
              matIconSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker (dateChange)="trialM($event)"></mat-datepicker>
          </mat-form-field>

          <mat-form-field
            appearance="fill"
            (click)="picker2.open()"
            class="removeOnScreen425"
          >
            <mat-label>Check out date</mat-label>
            <input
              matInput
              [min]="checkoutDate"
              [(ngModel)]="minDateForCheckOut"
              [matDatepicker]="picker2"
              [matDatepickerFilter]="myHolidayFilter"
              (dateChange)="trialM($event)"
            />
            <mat-datepicker-toggle
              matIconSuffix
              [for]="picker2"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="reservation">
        <div style="display: flex; justify-content: space-between">
          <p>₦{{ shortletData.price }} per night</p>
          <div style="display: flex; gap: 0.1rem">
            <p>★ {{ shortletData.rating }}</p>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <mat-form-field
              appearance="fill"
              class="reserve_datepicker"
              (click)="picker3.open()"
            >
              <mat-label>Check in date</mat-label>
              <input
                matInput
                [min]="minDate"
                [(ngModel)]="checkinDate"
                [matDatepicker]="picker3"
                [matDatepickerFilter]="myHolidayFilter"
                (dateChange)="trialM($event)"
              />
              <mat-datepicker-toggle
                matIconSuffix
                [for]="picker3"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker3></mat-datepicker>
            </mat-form-field>
          </div>
          <div class="col">
            <mat-form-field
              appearance="fill"
              class="reserve_datepicker secondDatepicker"
              (click)="picker4.open()"
            >
              <mat-label>Check out date</mat-label>
              <input
                matInput
                [min]="checkoutDate"
                [(ngModel)]="minDateForCheckOut"
                [matDatepicker]="picker4"
                [matDatepickerFilter]="myHolidayFilter"
                (dateChange)="trialM($event)"
              />
              <mat-datepicker-toggle
                matIconSuffix
                [for]="picker4"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker4></mat-datepicker>
            </mat-form-field>
          </div>
        </div>

        <div class="guest_counter">
          <p class="guests_label">Guests</p>
          <span (click)="decrement()"
            ><img
              [ngClass]="{
                minGuestReached: counter === 1
              }"
              style="
                width: 30px;
                height: 30px;
                margin-left: 10px;
                cursor: pointer;
              "
              src="../../../assets/svg/minus.svg"
              alt=""
          /></span>

          <div
            style="display: inline-block; text-align: center"
            class="counter_number_div"
          >
            <span class="guest_number" style="font-size: 20px">{{
              counter
            }}</span>
          </div>
          <span class="float-end" (click)="increment()"
            ><img
              [ngClass]="{
                maxGuestReached: counter === shortletData.maxNoOfGuests
              }"
              style="
                width: 30px;
                height: 30px;
                margin-right: 10px;
                cursor: pointer;
              "
              src="../../../assets/svg/add.svg"
              alt=""
          /></span>
        </div>
        <div class="col" style="padding-left: 0; padding-right: 0">
          <mat-form-field appearance="fill" class="reserve_datepicker">
            <mat-label>Check out date</mat-label>
            <input
              matInput
              [min]="checkoutDate"
              [(ngModel)]="minDateForCheckOut"
              [matDatepicker]="picker4"
              [matDatepickerFilter]="myHolidayFilter"
              (dateChange)="trialM($event)"

            />
            <mat-datepicker-toggle
              matIconSuffix
              [for]="picker4"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker4></mat-datepicker>
          </mat-form-field>
        </div>
      </div>

        <!-- if check in date and checkout dates are picked, display this -->
        <div class="bill">
          <p>₦{{ shortletData.price }} x {{ numberOfNights }} nights</p>
          <!-- <p>${{ shortletData.price * numberOfNights }}</p> -->
          <p>₦{{ calculateNumberOfNights }}</p>
        </div>
        <div class="bill">
          <p>Cleaning fee</p>
          <p>₦{{ shortletData.cleaningFee }}</p>
        </div>
        <div class="bill">
          <p>HMS Service fee</p>
          <p>₦{{ shortletData.serviceFee }}</p>
        </div>
        <hr />
        <div class="bill">
          <p>Total before taxes</p>
          <p>₦ {{ total }}</p>
        </div>
        <div class="reserve-btn">
          <button
            routerLink="booking"
            [disabled]="buttonDisable"
            [queryParams]="{
              checkin: checkinDate,
              checkout: minDateForCheckOut,
              nights: numberOfNights,
              guests: counter,
              service: shortletData.serviceFee,
              cleaning: shortletData.cleaningFee
            }"
          >
            {{ buttonDisable ? "Not Available" : "Reserve" }}
          </button>
          <p *ngIf="!buttonDisable" class="small">You won't be charged yet</p>
        </div>
      </div>
    </div>
  </div>
  <hr />
  <h3>Comments</h3>
  <div class="row">
    <div *ngFor="let comment of comments" class="col-md-6">
      <div class="user_info">
        <div class="user-img">
          <img
            style="
              width: 43px;
              height: 43px;
              vertical-align: top;
              margin-right: 10px;
            "
            src="../../../assets/svg/profile.svg"
            alt=""
          />
          <div style="display: inline-block; vertical-align: bottom">
            <h5 style="margin: 0">{{ comment.users.name }}</h5>
            <p style="margin: 0; color: #4a4a4a">{{ comment.commentDate }}</p>
          </div>
        </div>
        <p style="padding-top: 6px">{{ comment.comment }}</p>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div *ngIf="username" class="signedIn_user">
        <h5>{{ username }}</h5>
        <input
          class="form-control w-100"
          type="text"
          placeholder="Comment..."
          [(ngModel)]="UserComment"
        />
        <button class="send_comment float-end" (click)="onSendComment()">
          Send
        </button>
      </div>
    </div>
  </div>

